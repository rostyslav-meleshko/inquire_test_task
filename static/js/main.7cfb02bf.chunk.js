(this.webpackJsonpinquire_test_task=this.webpackJsonpinquire_test_task||[]).push([[0],{16:function(t,e,n){},31:function(t,e,n){},32:function(t,e,n){},34:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var c=n(1),s=n(9),r=n.n(s),a=n(2),o=n(20),i=n(6),u=n(7),b=n(18),l=n(19);var j=function(t){var e=t.title,n=t.body;return fetch("https://bloggy-api.herokuapp.com/posts",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({title:e,body:n}),redirect:"follow"})},p=function(t){return fetch("https://bloggy-api.herokuapp.com/posts/".concat(t),{method:"DELETE",headers:{"Content-type":"application/json"}})};function d(t,e){if(0!==t)return fetch("https://bloggy-api.herokuapp.com/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({postId:t,body:e})})}var m="SET_POSTS",h="SET_POST_ID",f=function(t){return t.posts},O=function(t){return t.postId},x={posts:[],postId:0},v=function(){return function(t){fetch("https://bloggy-api.herokuapp.com/posts").then((function(t){return t.json()})).then((function(e){t(function(t){return{type:m,posts:t}}(e))}))}},y=Object(u.createStore)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case m:return Object(i.a)(Object(i.a)({},t),{},{posts:Object(o.a)(e.posts)});case h:return Object(i.a)(Object(i.a)({},t),{},{postId:e.postId});default:return t}}),Object(b.composeWithDevTools)(Object(u.applyMiddleware)(l.a))),N=(n(31),n(32),n(3)),_=n.n(N),g=n(5),w=(n(34),n(0)),k=function(){var t=Object(a.b)(),e=Object(a.c)(f),n=function(e){t(function(t){return{type:h,postId:t}}(e))},c=function(){var e=Object(g.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(n);case 2:t(v());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"PostsList",children:[Object(w.jsx)("h2",{children:"Posts:"}),Object(w.jsx)("div",{children:Object(w.jsx)("ul",{className:"PostsList__list",children:e.map((function(t){return Object(w.jsxs)("li",{className:"PostsList__item",children:[Object(w.jsxs)("div",{children:[Object(w.jsx)("b",{children:"[Post #".concat(t.id,"]: ")}),t.title]}),Object(w.jsxs)("div",{children:[Object(w.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return n(t.id)},children:"Show Details"}),Object(w.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return c(t.id)},children:"Delete Post"})]})]},t.id)}))})})]})},C=n(4),S=(n(36),function(){return Object(w.jsx)("div",{className:"Loader",children:Object(w.jsx)("div",{className:"Loader__content"})})}),P=(n(37),n(16),function(){var t=Object(a.c)(O),e=Object(c.useState)(""),n=Object(C.a)(e,2),s=n[0],r=n[1],o=function(){var e=Object(g.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(s.trim().length>0)){e.next=5;break}return e.next=4,d(t,s);case 4:r("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){return o(t)},children:[Object(w.jsx)("div",{className:"form-field",children:Object(w.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:s,onChange:function(t){return r(t.target.value)}})}),Object(w.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",disabled:!(s.trim().length>0),children:"Add a comment"})]})})}),F=function(){var t=Object(a.b)(),e=Object(a.c)(O),n=Object(c.useState)({}),s=Object(C.a)(n,2),r=s[0],o=s[1],i=Object(c.useState)(""),u=Object(C.a)(i,2),b=u[0],l=u[1],j=Object(c.useState)(""),p=Object(C.a)(j,2),d=p[0],m=p[1],h=Object(c.useState)(!1),f=Object(C.a)(h,2),x=f[0],y=f[1],N=Object(c.useCallback)(Object(g.a)(_.a.mark((function t(){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://bloggy-api.herokuapp.com/posts/".concat(e)).then((function(t){return t.json()}));case 2:n=t.sent,o(n),l(n.title),m(n.body);case 6:case"end":return t.stop()}}),t)}))),[e]);Object(c.useEffect)((function(){N()}),[N]);var k=function(){var n=Object(g.a)(_.a.mark((function n(c){return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),!b.trim()||!d.trim()){n.next=9;break}return n.next=4,s=b,r=d,fetch("https://bloggy-api.herokuapp.com/posts/".concat(e),{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify({title:s,body:r}),redirect:"follow"});case 4:y(!1),t(v()),N(),n.next=10;break;case 9:y(!1);case 10:case"end":return n.stop()}var s,r}),n)})));return function(t){return n.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"PostDetails",children:[Object(w.jsx)("h2",{children:"Post details:"}),x?Object(w.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){return k(t)},children:[Object(w.jsx)("div",{className:"form-field",children:Object(w.jsx)("input",{name:"title",placeholder:"Type titlr here",className:"NewCommentForm__input",value:b,onChange:function(t){return l(t.target.value)}})}),Object(w.jsx)("div",{className:"form-field",children:Object(w.jsx)("textarea",{name:"body",placeholder:"Type post here",className:"NewCommentForm__input",value:d,onChange:function(t){return m(t.target.value)}})}),Object(w.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Update post"})]}):Object(w.jsxs)("section",{className:"PostDetails__post",children:[Object(w.jsx)("h3",{children:Object(w.jsx)("em",{children:r.title})}),r.body?Object(w.jsx)("p",{children:r.body}):Object(w.jsx)(S,{}),Object(w.jsx)("button",{type:"button",className:"button",onClick:function(){return y(!0)},children:"Edit post"})]}),Object(w.jsx)("section",{children:Object(w.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(w.jsx)(P,{})})})]})},T=n(11),D=function(){var t=Object(a.b)(),e=Object(c.useState)(!0),n=Object(C.a)(e,2),s=n[0],r=n[1],o=Object(c.useState)({title:"",body:""}),u=Object(C.a)(o,2),b=u[0],l=u[1],p=function(t){var e=t.name,n=t.value;l((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(T.a)({},e,n))})),r(!0)},d=function(){var e=Object(g.a)(_.a.mark((function e(n){var c,s;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=b.title,s=b.body,n.preventDefault(),!(c.trim().length>0&&s.trim().length>0)){e.next=10;break}return e.next=5,j(b);case 5:l({title:"",body:""}),r(!0),t(v()),e.next=11;break;case 10:r(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){return d(t)},children:[Object(w.jsx)("div",{className:"form-field",children:Object(w.jsx)("input",{type:"text",name:"title",placeholder:"Post title",className:"NewCommentForm__input",value:b.title,onChange:function(t){return p(t.target)}})}),Object(w.jsx)("div",{className:"form-field",children:Object(w.jsx)("textarea",{name:"body",placeholder:"Type post here",className:"NewCommentForm__input",value:b.body,onChange:function(t){return p(t.target)}})}),Object(w.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add new post"})]}),!s&&Object(w.jsx)("div",{className:"alarm",children:Object(w.jsx)("p",{children:"Fields should not be empty"})})]})},E=function(){var t=Object(a.b)(),e=Object(a.c)(O);function n(){t(v())}return Object(c.useEffect)((function(){n()}),[]),Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)("header",{className:"App__header App__form-wrapper",children:Object(w.jsx)(D,{})}),Object(w.jsxs)("main",{className:"App__main",children:[Object(w.jsx)("div",{className:"App__sidebar",children:Object(w.jsx)(k,{})}),!!e&&Object(w.jsx)("div",{className:"App__content",children:Object(w.jsx)(F,{postId:e,fetchPosts:n})})]})]})};r.a.render(Object(w.jsx)(a.a,{store:y,children:Object(w.jsx)(E,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.7cfb02bf.chunk.js.map